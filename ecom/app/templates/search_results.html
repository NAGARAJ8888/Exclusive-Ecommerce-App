{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="mx-10 my-10 md:mx-32">
<h2>Search Results for "{{ query }}"</h2>

{% if products %}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {% for product in products %}
            <div class="mt-10">
        <div
          class="w-32 h-32 md:w-64 md:h-64 bg-gray-200 rounded-lg flex flex-col justify-end relative group"
        >
          <!-- Delete icon at top-right -->
          <div class="absolute top-3 right-3 z-40">
            <a href="{% url 'product_detail' product.slug %}"
              ><img
                src="{% static 'Quick View.png' %}"
                alt="quick-view"
                class="w-7 h-7 rounded-full cursor-pointer bg-white p-1"
            /></a>
          </div>
          <div class="absolute top-3 left-3 bg-red-500 rounded z-10">
            <p class="text-white px-2 py-1 text-xs">
              -{{ product.discount_percent }}%
            </p>
          </div>

          <!-- Product image centered -->
          <div class="absolute inset-0 flex items-center justify-center z-0">
            <img
              src="{{ product.image.url }}"
              alt="{{ product.title }}"
              class="object-contain w-3/4 h-3/4"
            />
          </div>
        </div>
        <p class="my-2 text-[10px] md:text-sm font-bold">
          <a href="{% url 'product_detail' product.slug %}"
            >{{ product.title }}</a
          >
        </p>
        <span class="text-red-500 pr-4">${{ product.new_price }}</span>
        <span><del class="text-gray-500">${{ product.old_price }}</del></span>
        <span class="mt-2 flex items-center gap-3"
          ><img
            src="{% static 'Five star.png' %}"
            alt="stars"
            class="h-3 md:h-5"
          />
          <span class="text-gray-400">({{ product.rating_count }})</span></span
        >
      </div>
        {% endfor %}
    </div>
{% else %}
    <p>No products found matching your search.</p>
{% endif %}

</div>
<button class="flex justify-center items-center my-10 w-full">
        <a
          href="{% url 'all_products' %}"
          class="bg-red-500 text-white px-10 py-1 md:px-12 md:py-3 rounded-md hover:bg-red-600 transition duration-300"
          >View All Products</a
        >
      </button>

{% endblock %}
